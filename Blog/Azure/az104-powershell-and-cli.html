<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/favicon.ico" rel="icon" type="image/x-icon">
    <title>AZ-104 Study Guide part 2 - PowerShell - SixSidedDice.com - Blog</title>
    <link rel="stylesheet" href="https://bootswatch.com/4/slate/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism-okaidia.css" integrity="sha256-nwDipdLn93O1CZGoRDor0i4CLmDQb+mdg/yaYMUCuLM=" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/site.css">
    <link rel="stylesheet" href="./../site.css">
    <script src="https://kit.fontawesome.com/d22effaf67.js" crossorigin="anonymous"></script>
    <script type="module" src="/js/header.js"></script>
    <script type="module" src="/js/footer.js"></script>
    
</head>
<body>
    <six-sided-header></six-sided-header>
    <div class="container-fluid">
        <main role="main" class="pb-3">
            
<div class="article-header">
    Aug 09, 2022

        <span class="badge badge-info">AZ104</span>
        <span class="badge badge-info">Concepts</span>
        <span class="badge badge-info">Powershell</span>
        <span class="badge badge-info">CLI</span>
</div>

<h1 id="powershell-and-the-cli">Powershell and the CLI</h1>
<p>The <a href="https://docs.microsoft.com/en-us/certifications/azure-administrator/" target="_blank">AZ-104: Azure Administrator Associate</a> certification requires subject matter expertise in implementing, managing, and monitoring an organization's Microsoft Azure environment, including virtual networks, storage, compute, identity, security, and governance.</p>
<p>In part 2 of the guide we will cover Powershell and the Azure CLI.</p>
<h2 id="azure-resources">Azure Resources</h2>
<p>There are 3 main ways to access resources in Azure:</p>
<ul>
<li><a href="https://portal.azure.com" target="_blank">Azure Portal</a></li>
<li><a href="https://docs.microsoft.com/en-us/powershell/azure/?view=azps-8.2.0&amp;viewFallbackFrom=azps-3.3.0" target="_blank">PowerShell</a></li>
<li>Bash / <a href="https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest" target="_blank">CLI</a></li>
</ul>
<p>Scripting is used to automate Azure and reliably replicate manual tasks. Scripts can be added to source control so we can monitor changes over time and act as a form of living documentation.</p>
<h2 id="azure-cloud-shell">Azure Cloud Shell</h2>
<p>Azure Cloud Shell is a command line shell built into the Azure Portal an accessible via the [&gt;_] icon at the top of the portal. The Azure Cloud Shell requires a storage account to be created to store scripts etc. This storage account is created automatically when the Cloud Shell is first accessed.</p>
<h2 id="predictable-cli-commandlets">Predictable CLI / CommandLets</h2>
<p>Most CLI commands follows a predictable format:</p>
<ul>
<li>All commands start with &quot;az&quot;</li>
<li>The second part of the command relates to the resource/service type (&quot;vm&quot;, &quot;keyvault&quot;, &quot;network vnet&quot; etc.)</li>
<li>The third part of the command is the verb/action (&quot;list&quot;, &quot;create&quot;, &quot;delete&quot; etc.)</li>
</ul>
<p>Most PowerShell commands follow a similar predictable format:</p>
<ul>
<li>The first part of the command is the verb/action (&quot;Get-&quot;, &quot;New-&quot;, &quot;Remove-&quot; etc.)</li>
<li>The second part is &quot;Az&quot;</li>
<li>The third part of the command is the relates to the resource/service type (&quot;Get-AzVM&quot;, &quot;New-AzKeyVault&quot; etc.)</li>
</ul>
<h2 id="setting-up-powershell-locally">Setting up PowerShell locally</h2>
<ul>
<li><p>Check what version of PowerShell you have installed by running PowerShell and executing the <code>$PSVersionTable</code> command.</p>
</li>
<li><p>Version 7.2.5 is the latest version (as of 9th August 2022). To upgrade you can run either of the following commands (depending on your preferred command line package manager):</p>
<ul>
<li><code>choco install powershell-core</code></li>
<li><code>winget upgrade Microsoft.PowerShell</code></li>
</ul>
</li>
<li><p>Restart Windows Terminal (if using) and change the Default profile to <code>PowerShell</code> to use PowerShell 7 by default.</p>
</li>
<li><p>Install the Azure PowerShell module by executing the command <code>Install-Module -Name Az -AllowClobber -Repository PSGallery -Force</code> (the <code>AllowClobber</code> parameter allows upgrades to overwrite previous versions, the <code>Force</code> parameter should only be required when upgrading between major version releases)</p>
</li>
<li><p>Uninstall any legacy <code>AzureRM</code> module with the command <code>Uninstall-AzureRm</code>.</p>
</li>
<li><p>Check the installed versions of the Az module using the command <code>Get-InstalledModule -Name Az -AllVersions | Select-Object -Property Name, Version</code></p>
</li>
<li><p>Execute the <code>Connect-AzAccount</code> command to connect to your subscription.</p>
</li>
</ul>
<h3 id="switching-between-subscriptions">Switching between subscriptions</h3>
<ul>
<li>Login to any subscription (see above)</li>
<li>Execute the command <code>Get-AzSubscription</code> to list all the available subscriptions</li>
<li>Create a <code>$context</code> variable by executing the command <code>$context = Get-AzSubscription -SubscriptionId &lt;One of your subscription ids&gt;</code></li>
<li>Set the context for the PowerShell session by executing the command <code>Set-AzContext $context</code></li>
</ul>

        </main>
    </div>

    <six-sided-footer></six-sided-footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js" integrity="sha256-2N+3bVl+vOCJyZ9ZbH9Eb99XKT/53oT5V8eRbB8bFcA=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-33Qw0lN3qo7tLZL4c7vDLCapRUs+gNtQRaVIOHk4Ors=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.11.0/dist/mermaid.min.js"></script>
    
    <script>
        $(function() {
            mermaid.initialize({ startOnLoad: true, theme: 'dark' });
        });
    </script>
</body>
</html>
